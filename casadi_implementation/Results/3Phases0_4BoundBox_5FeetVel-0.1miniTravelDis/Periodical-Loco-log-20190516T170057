====================================================
Genearl Information:
====================================================
CasADi Implementation
2D Locomotion Control using Mixed-integer Nonlinear Optimization
With a Particular Emphasis on Periodical Gait Discovery
Multi-Phase Formulation:
Optimize over State, Control, Gait Sequence, and Switching Time
----------------------------------------------------
Date and Time:
   16-May-2019 17:00:57

----------------------------------------------------
Correspondent Log File Name: Periodical-Loco-log-20190516T170057
====================================================
 
====================================================
Setup Robot Kinematics Properties: 
----------------------------------------------------
Define Kinematics Bounding Box Width (i.e. 0.4, 0.6):
0.4
----------------------------------------------------
Define Kinematics Bounding Box Hiehgt (i.e. 0.2, 0.25, 0.3):
0.4
----------------------------------------------------
====================================================
Setup Terrain Model: 
----------------------------------------------------
Specify the Terrain Type: 1 -> Flat Terrain; 2 -> Slopes
1
Selected Flat Terrain
----------------------------------------------------
Plot the Terrain Model? 1 -> Yes; 2 -> No
2
----------------------------------------------------
Friction Cone: 0.6
====================================================
 
====================================================
Task Specification:
----------------------------------------------------
Specify Travel Speed along X-axis (m/s): 
0.1
----------------------------------------------------
Terminal Time:
Optimization of Terminal Time (Tend): 
1 -> Optimize, 2 -> Left as Free Variable 
2
Terminal Time (Tend) is Set as Free Variables
Specify Upper Bound of Terminal Time (i.e. 1,2..(s)):
3
----------------------------------------------------
 
====================================================
Temporal and Discretization Setup:
----------------------------------------------------
Input Number of Phases: 
3
----------------------------------------------------
Input Number of Knots for Each Phase: 
10
----------------------------------------------------
Resultant Discretization:
Knot/Discretization Step Size of tau: 0.033333
Number of Knots/Discretization of tau (from 0 to 1: 31) (Number of Knots/Discretization in Each Phase * Number of Phases(NumKnots) + 1)
====================================================
 
====================================================
Big-M Setup
====================================================
Big-M for Foot/End-Effector in X-axis:
Select the Setup Case for big-M value for Foot/End-Effector Velocity in x-axis: 
1 -> Default Value (5m/s); 2 -> N time of average task speed (in X-axis); 3 -> User Specified: 
3
 
Input Big-M value for foot/end-effector Velocity for X-axis: 
5
 
Configured Big-M Value for Foot/End-Effector Velocity for X-axis: 5 m/s
----------------------------------------------------
Big-M for Foot/End-Effector in Y-axis:
Select the Setup Case for big-M value for Foot/End-Effector Velocity in Y-axis: 
1 -> Default Value (5m/s); 2 -> User Specified: 
2
 
Input Big-M value for foot/end-effector Velocity for Y-axis (e.g. 1-5+ m/s): 
NOTE: Can Write the Value as the Kinematics Bounding Box Height (BoundingBox_Height)/Desired Time to Travel the Entire Bounding Box Height
5
 
Configured Big-M Value for Foot/End-Effector Velocity for Y-axis: 5 m/s
----------------------------------------------------
Big-M for Contact Forces
Input Big-M for Foot-Ground Reaction Forces along X-axis (e.g. 200,300,1000,1e5):
300
----------------------------------------------------
Input Big-M for Foot-Ground Reaction Forces along Y-axis (e.g. 1e3, 1e5, better larger than Mfx):
1200
====================================================
====================================================
Solver Setups:
====================================================
Solver Selection: 
1 -> Knitro; 2 -> Bonmin 
1
Selected Solver: knitro
----------------------------------------------------
Solver Dependent Options:
----------------------------------------------------
Define Number of Max Nodes to be Explored: 
 1--> Worst Case Scenario; 2 --> User Specified; 3 --> Default Value
1
Selected Worst-case Scenarios to Explore 64 Nodes
====================================================
 
====================================================
Generate Decision Variables Vectors/Lists:
----------------------------------------------------
Checked - Contact Configuration and Switching Time Varaibels for Each Phase are Generated Coorectly
-----------------------------------------------------------
Checked - Names in DecisionVars are consistent with the name labels in VarNamesList
Constraints and Objetive Function Constructed
===================================================
 
===================================================
Optimization Started

=======================================
           Academic License
       (NOT FOR COMMERCIAL USE)
         Artelys Knitro 11.1.2
=======================================

MINLP solver shifted start point to satisfy bounds (1 variable).
hessopt:                 1
mip_branchrule:          2
mip_heuristic:           0
mip_maxnodes:            64
mip_outinterval:         50
mip_outlevel:            2
mip_selectrule:          3
Knitro changing mip_method from AUTO to 1.
Knitro changing mip_rootalg from AUTO to 1.
Knitro changing mip_lpalg from AUTO to 3.
Knitro changing mip_rounding from AUTO to 3.
Knitro changing mip_pseudoinit from AUTO to 1.

Problem Characteristics
-----------------------
Objective goal:  Minimize
Objective type:  general
Number of variables:                                567
    bounded below only:                              62
    bounded above only:                               0
    bounded below and above:                         39
    fixed:                                            1
    free:                                           465
Number of binary variables:                           6
Number of integer variables:                          0
Number of constraints:                             1057
    linear equalities:                                6
    quadratic equalities:                             0
    gen. nonlinear equalities:                      304
    linear one-sided inequalities:                  623
    quadratic one-sided inequalities:                 0
    gen. nonlinear one-sided inequalities:            0
    linear two-sided inequalities:                    0
    quadratic two-sided inequalities:                 0
    gen. nonlinear two-sided inequalities:          124
Number of nonzeros in Jacobian:                    3585
Number of nonzeros in Hessian:                     1522

Knitro detected 0 GUB constraints
Knitro derived 0 knapsack covers after examining 62 constraints
Knitro solving root node relaxation
Knitro MIP using Branch and Bound method

                                            Best        Best     Cumulative
   Node    Left    Iinf    Objective     Relaxation   Incumbent   Real Time
  ------  ------  ------  ----------     ----------  ----------  ----------
       1       0       6    9.74e+04       9.74e+04                   0.280
*      8       5       0    1.99e+05  f    9.74e+04    1.99e+05       0.511
*      9       4       0    9.94e+04  f    9.74e+04    9.94e+04       0.555
      50       1       2    9.84e+04       9.74e+04    9.94e+04      13.152

EXIT: Node limit reached. Integer feasible point found.

Final Statistics for MIP
------------------------
Final objective value               =   9.93597109827770e+04
Final integrality gap (abs / rel)   =  1.00e+03 /   1.01e-02 ( 1.01%)
# of nodes processed                =       64
# of subproblems processed          =       66
Total program time (secs)           =      24.35259 (    24.381 CPU time)
Time spent in evaluations (secs)    =       1.10557

===========================================================================

               t_proc [s]   t_wall [s]    n_eval
      nlp_fg        0.347        0.324     13558
   nlp_gf_jg        0.314         0.31      9780
  nlp_hess_l         0.29        0.289      9726
      solver         24.4         24.4         1
===================================================
 
===================================================
Result Extraction:
---------------------------------------------------
Result Variables Extracted
Original Result Variables Backuped - Result Include Vanishing Phases - End with "origin"
Removed Variables within Vanished Phases
===================================================
 
{Unable to perform assignment because dot indexing is not supported for variables of this type.

Error in <a href="matlab:matlab.internal.language.introspective.errorDocCallback('Periodical_Motion_Discovery_casadi_multi_phase', '/home/jiayu/Desktop/Locomotion-Control-using-Mixed-Integer_Optimization/casadi_implementation/Periodical_Motion_Discovery_casadi_multi_phase.m', 1385)" style="font-weight:bold">Periodical_Motion_Discovery_casadi_multi_phase</a> (<a href="matlab: opentoline('/home/jiayu/Desktop/Locomotion-Control-using-Mixed-Integer_Optimization/casadi_implementation/Periodical_Motion_Discovery_casadi_multi_phase.m',1385,0)">line 1385</a>)
res.f = full(sol.f); %cost function
} 
sol.f

ans = 

99359.7
sol.f.type_name()

ans =

    'DM'

res

res =

         0
    0.0002
    0.0004
    0.0006
    0.0008
    0.0010
    0.0012
    0.0014
    0.0016
    0.0018
    0.0020
    0.0020
    0.0020
    0.0020
    0.0020
    0.0020
    0.0020
    0.0020
    0.0020
    0.0020
    0.0020
    0.0118
    0.0216
    0.0314
    0.0412
    0.0510
    0.0609
    0.0707
    0.0805
    0.0903
    0.1001
    0.4662
    0.4664
    0.4665
    0.4667
    0.4668
    0.4668
    0.4669
    0.4668
    0.4668
    0.4667
    0.4665
    0.4665
    0.4665
    0.4665
    0.4665
    0.4665
    0.4665
    0.4665
    0.4665
    0.4665
    0.4665
    0.4578
    0.4511
    0.4462
    0.4433
    0.4423
    0.4432
    0.4461
    0.4508
    0.4575
    0.4662
    0.0226
    0.0193
    0.0159
    0.0126
    0.0093
    0.0059
    0.0026
   -0.0008
   -0.0041
   -0.0074
   -0.0108
   -0.0108
   -0.0108
   -0.0108
   -0.0108
   -0.0108
   -0.0108
   -0.0108
   -0.0108
   -0.0108
   -0.0108
   -0.1744
   -0.2469
   -0.2487
   -0.1998
   -0.1206
   -0.0312
    0.0480
    0.0969
    0.0952
    0.0226
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1000
    0.1076
    0.0879
    0.0683
    0.0487
    0.0291
    0.0094
   -0.0102
   -0.0298
   -0.0495
   -0.0691
   -0.0887
   -0.0887
   -0.0887
   -0.0887
   -0.0887
   -0.0887
   -0.0887
   -0.0887
   -0.0887
   -0.0887
   -0.0887
   -0.0691
   -0.0495
   -0.0298
   -0.0102
    0.0094
    0.0291
    0.0487
    0.0683
    0.0879
    0.1076
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -1.6680
   -0.7396
   -0.0175
    0.4982
    0.8077
    0.9108
    0.8077
    0.4982
   -0.0175
   -0.7396
   -1.6680
    0.2240
    0.2340
    0.2440
    0.2540
    0.2640
    0.2740
    0.2840
    0.2941
    0.3041
    0.3141
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
    0.3241
   -0.0000
    0.0090
    0.0150
    0.0190
    0.0211
    0.0218
    0.0210
    0.0187
    0.0146
    0.0087
    0.0000
    0.0000
    0.0000
    0.0000
    0.0000
    0.0000
    0.0000
    0.0000
    0.0000
    0.0000
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    1.2518
    1.3150
    1.3766
    1.4368
    1.4954
    1.5528
    1.6088
    1.6636
    1.7172
    1.7696
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
    4.4817
    3.0027
    2.0011
    1.0730
    0.3114
   -0.3969
   -1.1452
   -2.0195
   -2.9468
   -4.3615
   -0.4720
   -0.5849
   -0.7198
   -0.8760
   -1.0561
   -1.2694
   -1.5382
   -1.9198
   -2.5859
   -4.2318
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
   -0.3319
   -0.3219
   -0.3119
   -0.3019
   -0.2919
   -0.2818
   -0.2718
   -0.2618
   -0.2518
   -0.2418
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.2318
   -0.0000
    0.0072
    0.0119
    0.0149
    0.0165
    0.0169
    0.0159
    0.0137
    0.0103
    0.0057
    0.0000
    0.0000
    0.0000
    0.0000
    0.0000
    0.0000
    0.0000
    0.0000
    0.0000
    0.0000
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    1.7406
    1.7649
    1.7876
    1.8088
    1.8285
    1.8467
    1.8634
    1.8787
    1.8925
    1.9050
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
    3.5779
    2.3575
    1.5109
    0.8199
    0.1710
   -0.4698
   -1.1038
   -1.7181
   -2.2969
   -2.8486
   -1.7727
   -1.7150
   -1.6954
   -1.7541
   -1.8718
   -2.0327
   -2.2278
   -2.4595
   -2.7558
   -3.2612
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
   -0.0000
    0.0000
    0.0000
    0.0000
    0.0000
    0.0000
    0.0000
   -0.0000
   -0.0000
   -0.0000
   -0.0567
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
  225.1527
  225.1527
  225.1527
  225.1527
  225.1527
  225.1527
  225.1527
  225.1527
  225.1527
  225.1527
    0.1049
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
   -0.0000
    0.0000
    0.0000
    0.0000
    0.0000
    0.0000
    0.0000
   -0.0000
   -0.0000
   -0.0000
   -0.0567
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
  225.1527
  225.1527
  225.1527
  225.1527
  225.1527
  225.1527
  225.1527
  225.1527
  225.1527
  225.1527
    0.1049
    0.0200
    0.0200
    1.0009
         0
         0
    1.0000
         0
         0
    1.0000

result_cost = full(sol.f); %cost function
x_result

x_result =

         0
    0.0002
    0.0004
    0.0006
    0.0008
    0.0010
    0.0012
    0.0014
    0.0016
    0.0018
    0.0020
    0.0118
    0.0216
    0.0314
    0.0412
    0.0510
    0.0609
    0.0707
    0.0805
    0.0903
    0.1001

TimeSeries

TimeSeries =

         0
    0.0020
    0.0040
    0.0060
    0.0080
    0.0100
    0.0120
    0.0140
    0.0160
    0.0180
    0.0200
    0.1181
    0.2162
    0.3143
    0.4124
    0.5105
    0.6085
    0.7066
    0.8047
    0.9028
    1.0009


PFxdot_result

PFxdot_result =

    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
    5.0000
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0
         0

CF_result

CF_result =

     0
     1

CH_result

CH_result =

     0
     1

speed

speed =

    0.1000

TimeSeries

TimeSeries =

         0
    0.0020
    0.0040
    0.0060
    0.0080
    0.0100
    0.0120
    0.0140
    0.0160
    0.0180
    0.0200
    0.1181
    0.2162
    0.3143
    0.4124
    0.5105
    0.6085
    0.7066
    0.8047
    0.9028
    1.0009

Periodical_Motion_Discovery_casadi_multi_phase
